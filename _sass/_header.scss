html,
body {
  height: 100%;
  background-color: $terminal-bg;
}

// Terminal header styling
.bar-header {
  background-color: rgba($terminal-bg, 0.95);
  border-bottom: 1px solid rgba($terminal-green, 0.3);
  padding: rem(10px) rem(15px);
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  z-index: $z-header;
  transition: top 0.5s, left 0.3s ease, background-color 0.5s, box-shadow 0.5s;
  display: flex;
  align-items: center;

  @include media(">=sm") {
    padding: rem(15px) rem(25px);
  }

  // Terminal prompt styling
  &.terminal-header {
    .terminal-menu-btn {
      float: left;
      cursor: pointer;
      margin-right: rem(15px);
      color: $terminal-green;
      font-size: rem(16px);
      @include mainFont(400);
      text-decoration: none;

      &:hover {
        @include glowText($terminal-green);
      }

      .menu-icon {
        display: block;
      }
    }

    .terminal-search {
      margin-left: auto;
      color: $terminal-green;
      font-size: rem(16px);
      @include mainFont(400);
      text-decoration: none;
      cursor: pointer;

      &:hover {
        @include glowText($terminal-green);
      }
    }
  }

  .logo {
    display: inline-block;
    margin: 0;
    height: rem(32px);
    line-height: rem(32px);
    flex: 1;

    a {
      display: block;
      color: $terminal-green;
      text-decoration: none;
      font-size: rem(14px);
      position: relative;
      outline: 0;
      @include mainFont(400);

      @include media(">=sm") {
        font-size: rem(16px);
      }

      // Hide static terminal on desktop (needs to be here for specificity)
      &.terminal-static {
        @include media(">=sm") {
          display: none;
        }
      }
    }
  }

  // Terminal prompt colors (shared between static and interactive)
  .terminal-prompt {
    .prompt-user {
      color: $terminal-cyan;
    }

    .prompt-at {
      color: $terminal-dim;
    }

    .prompt-host {
      color: $terminal-green;
      @include glowText($terminal-green);
    }

    .prompt-colon {
      color: $terminal-dim;
    }

    .prompt-path {
      color: $terminal-amber;
    }

    .prompt-dollar {
      color: $terminal-green;
      margin-left: rem(5px);
    }
  }

  // Static terminal (mobile)
  .terminal-static {
    display: block;

    @include media(">=sm") {
      display: none;
    }

    .prompt-command {
      color: $terminal-cyan;
      @include glowText($terminal-cyan);
    }

    .prompt-arg {
      color: $terminal-amber;
    }

    .cursor {
      color: $terminal-green;
      animation: blink 1s step-end infinite;
    }
  }

  // Interactive terminal (desktop)
  .terminal-interactive {
    display: none;
    position: relative;
    align-items: center;
    font-family: 'JetBrains Mono', monospace;
    font-size: rem(14px);
    @include mainFont(400);

    @include media(">=sm") {
      display: inline-flex;
      font-size: rem(16px);
    }

    &.shake {
      animation: shake 0.5s ease-in-out;
    }

    .terminal-cursor {
      color: $terminal-green;
      animation: blink 1s step-end infinite;
    }
  }

  .terminal-input {
    background: transparent;
    border: none;
    outline: none;
    color: $terminal-amber;
    font-family: inherit;
    font-size: inherit;
    padding: 0;
    margin-left: rem(5px);
    width: auto;
    caret-color: transparent; // Hide native caret, use custom cursor
  }

  // Dropdown suggestions
  .terminal-dropdown {
    display: none;
    position: absolute;
    top: 100%;
    left: 0;
    right: 0;
    margin-top: rem(10px);
    background: $terminal-card-bg;
    border: 1px solid $terminal-green;
    border-radius: rem(4px);
    max-height: rem(300px);
    overflow-y: auto;
    z-index: 100;

    &.active {
      display: block;
    }

    .dropdown-item {
      display: flex;
      align-items: center;
      padding: rem(8px) rem(12px);
      cursor: pointer;
      border-bottom: 1px solid rgba($terminal-green, 0.1);
      font-family: 'JetBrains Mono', monospace;
      font-size: rem(13px);

      &:last-child {
        border-bottom: none;
      }

      &:hover,
      &.selected {
        background: rgba($terminal-green, 0.1);
      }

      .dropdown-type {
        color: $terminal-dim;
        width: rem(40px);
        flex-shrink: 0;
      }

      .dropdown-name {
        color: $terminal-green;
        flex: 1;

        mark {
          background: transparent;
          color: $terminal-cyan;
          font-weight: 700;
        }
      }

      .dropdown-category {
        color: $terminal-dim;
        font-size: rem(11px);
        margin-left: rem(10px);
      }
    }
  }

  // LS output inline expansion
  .terminal-ls-output {
    display: none;
    position: absolute;
    top: 100%;
    left: 0;
    right: 0;
    margin-top: rem(10px);
    background: $terminal-card-bg;
    border: 1px solid $terminal-green;
    border-radius: rem(4px);
    padding: rem(10px);
    max-height: rem(400px);
    overflow-y: auto;
    z-index: 100;
    font-family: 'JetBrains Mono', monospace;
    font-size: rem(12px);

    &.active {
      display: block;
    }

    .ls-header,
    .ls-empty {
      color: $terminal-dim;
      margin-bottom: rem(8px);
    }

    .ls-row {
      display: flex;
      padding: rem(4px) 0;
      text-decoration: none;
      color: inherit;

      &:hover {
        background: rgba($terminal-green, 0.1);
      }

      &.ls-dir .ls-name {
        color: $terminal-cyan;
      }

      &.ls-file .ls-name {
        color: $terminal-green;
      }
    }

    .ls-perms {
      color: $terminal-dim;
      width: rem(100px);
      flex-shrink: 0;
    }

    .ls-extra {
      color: #888888;
      width: rem(100px);
      flex-shrink: 0;
      text-align: right;
      margin-right: rem(15px);
    }

    .ls-name {
      flex: 1;
    }
  }

  // Legacy support - keep old styles for static version
  .terminal-prompt a {
    .prompt-user {
      color: $terminal-cyan;
    }

    .prompt-at {
      color: $terminal-dim;
    }

    .prompt-host {
      color: $terminal-green;
      @include glowText($terminal-green);
    }

    .prompt-colon {
      color: $terminal-dim;
    }

    .prompt-path {
      color: $terminal-amber;
    }

    .prompt-dollar {
      color: $terminal-green;
      margin-left: rem(5px);
    }

    .prompt-command {
      color: $terminal-cyan;
      @include glowText($terminal-cyan);
    }

    .prompt-arg {
      color: $terminal-amber;
    }

    .cursor {
      color: $terminal-green;
      animation: blink 1s step-end infinite;
    }
  }
}

body.main-page {
  background-color: $terminal-bg;

  .bar-header {
    background-color: rgba($terminal-bg, 0.95);
  }
}

// Remove light mode - we're terminal only
body.light:not(.main-page) {
  .bar-header {
    background-color: rgba($terminal-bg, 0.95);
  }
}

.overlay {
  position: fixed;
  width: 100%;
  height: 100%;
  top: 0;
  right: 0;
  left: 0;
  bottom: 0;
  pointer-events: none;
  background: rgba(0, 0, 0, 0.8);
  z-index: 17;
  opacity: 0;
  transition: all 0.3s;

  &.show {
    pointer-events: auto;
    opacity: 1;
  }
}
